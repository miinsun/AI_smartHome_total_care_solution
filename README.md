![image](https://user-images.githubusercontent.com/61786235/106914836-bf511380-6748-11eb-8029-adfc819c6bcb.png)

## 개발의도 및 배경
> 최근 스마트 홈 및 IoT 기술이 확산되면서 가정마다 다양한 스마트기기들을 보유하게 되었습니다.     
현재 이러한 기기들은 각각 다른 제어 시스템을 이용해 개별적으로 제어하는 경우가 대부분입니다.                
이는 스마트기기의 본 목적인 편리함에서 벗어나  사용자가 복잡함을 느끼게 합니다.                 
구글과 같은 대기업 중심으로 플랫폼을 구축해 다양한 기기들이 연결되고 있지만, 아직까지는 표준화되어 있지 않기 때문에 이를 제대로 된 해결방안이라고 할 수는 없습니다.         

앞으로 우리 주변의 대부분의 사물은 IoT를 통해 연결될 것이고 이러한 기기들을 통합적으로 관리할 필요가 있다고 느꼈습니다. 그래서 저희는 어떤 특정 기업의 플랫폼이 아닌 표준화된 연결 방법, 
바로 다양한 스마트기기들을 통합 관리할 수 있는 스마트 홈 솔루션을 제작해야겠다고 생각했습니다.


- 주요 기능표
![그림1](https://user-images.githubusercontent.com/61786235/106915787-c7f61980-6749-11eb-837b-f5ca9742e307.png)


## 개발 환경
![그림2](https://user-images.githubusercontent.com/61786235/106916104-27ecc000-674a-11eb-852b-f735519b711c.png)

## 게이트웨이 및 스마트 기기개발
본 작품은 라떼판다에 구축된 하나의 게이트웨이를 통해 총 다섯 개의 스마트 기기를 제어하는 형태입니다. 
우선, 각 용도에 따른 센서들을 라즈베리 파이에 연결 및 제어할 수 있도록 하여 센서가 연결된 라즈베리 파이가 스마트 기기의 역할을 할 수 있도록 했습니다.

  1. 스마트 조명(움직임 감지)
  2. 스마트 냉난방기(온습도 감지)
  3. 스마트 공기청정기(먼지 감지)
  4. 스마트 창문(빗물 감지)
  5. 스마트 가스제어(가스 감지)
  
> 게이트웨이 서버는 각 스마트기기의 데이터들을 무선 네트워크를 통해 취합하고, 해당 데이터를 데이터베이스에 축적 및 데이터베이스에서 특정 동작 값을 다시 받아 스마트 기기에 보내 스마트 기기가 동작할 수 있도록 하는 역할을 합니다. 

- 게이트 웨이 기능 흐름도           
작품에서는 스마트 홈 기기를 제어하는 게이트웨이 서버와 웹 페이지를 제어하는 웹 서버가 데이터 베이스를 가운데에 두고 통신하도록 구현했습니다.
![그림4](https://user-images.githubusercontent.com/61786235/106917008-2bcd1200-674b-11eb-8d07-8522b2bc842d.png)

- SQL ERD             
![그림5](https://user-images.githubusercontent.com/61786235/106917248-6cc52680-674b-11eb-9d03-80268c9a34fb.png)                
회원 정보를 나타내는 userInfo 테이블이 다섯 개의 센서 테이블과 각각 관계를 맺고 있는 것을 확인할 수 있습니다. 데이터베이스의 역할을 한 줄로 정리하면 데이터베이스는 게이트웨이 서버와 웹 서버의 중간 역할을 하며 스마트 기기의 데이터를 축적 및 다시 각 서버에서 필요한 데이터를 제공하는 역할을 했다고 할 수 있습니다.

## 머신러닝 알고리즘 개발
- 알고리즘 시나리오         
![그림6](https://user-images.githubusercontent.com/61786235/106917684-d8a78f00-674b-11eb-90d6-f49ff1433505.png)       

- 머신러닝 모델링    
우선 원본 데이터에서 필요한 데이터를 추출해 데이터 셋을 만듭니다. 
가공된 데이터는 DB서버에 각 환경 별 테이블에 맞쳐진 형식으로 삽입됩니다. 
이때 연산의 기간은 5초를 간격으로 2주 동안 진행되었습니다. 
이 과정에서 속성 값은 사용자 ID, 자동 제어 값, 센서값, 날짜 값 이고 클래스 값은 상황(situation)이 됩니다. 
모델의 정확성을 위해서 학습 단계의 데이터 중  40%를 테스트 셋으로 저장하고 테스트할 때는 이 테스트 셋만을 활용했습니다.
> Azure Machine Learning Studio 서비스를 이용해 머신러닝을 모델링 하였습니다. 



- 머신 러닝 응용         
개발된 머신러닝을 응용하기 위한 방법으로  API형식으로 웹에 배포해 사용자가 자유롭게 사용할 수 있도록 하였습니다
    1. 미세먼지 센서 머신 러닝  
        사용자 패턴 인식하여 1~2주 정도의 데이터를 취합한 후, 어느 정도의 먼지 농도와 어느 시간에서 사용자가            
        공기청정기를 수동으로 조절 하는지 분석하여 기기가 자동으로 전원이 조절 되도록 함 
        * API, Primary 키               
        : ucHR8el3B6E+Sea/TJsvZv1fuJAClBWXR9FI+aEBr2P29xgIjCohFv/yLAqWW2JrmH4aSoLwVvMNgwp7HRa7TA==                     

    2. 온습도 센서 머신 러닝       
        사용자 패턴 인식하여 1~2주 정도의 데이터를 취합한 후, 어느 온도와 어느 시간에서 사용자가         
        냉난방기를 수동으로 조절하는지 분석하여 기기를 자동으로 조절되도록 함.     
        * API, Primary 키               
        : 2geaTWtrAIemT6EkCW7/OreI6NLucQd2UiwWAdbIvMLmlIrkkc2AZDMmKgOO0hz5B0RGNaltqelAJ1QZNv8sXQ==                 



## 제어 소프트웨어 개발
- 메뉴 구성도     
![그림7](https://user-images.githubusercontent.com/61786235/106919306-60da6400-674d-11eb-8afd-c5f6c7491136.png)

- 화면 UI
![그림8](https://user-images.githubusercontent.com/61786235/106919483-87989a80-674d-11eb-82f9-a8472eba686b.png)



## 기대효과 및 활용방안    
이 프로젝트는 스마트 홈의 통합 시스템을 구축하여 개개인에게 최적화된 라이프 스타일을 구축하도록 연구되었습니다.      
기존의 iot에서 보다 발전해 개인에게 맞는 적절한 맞춤 서비스를 연계할 수 있도록 노력했습니다.    

프로젝트의 활용 방안과 기대 효과는 다음과 같습니다.      
다양한 Iot 장치를 간편하게 통합하여 사용 환경을 구성할 수 있으며 이를 통해 화웨이, 삼성 같은 여러 제조사들의 플랫폼을 통합 할 수 있는 편의를 제공할 수 있습니다.     
또, 하나의 게이트웨이의 제어를 통해서 여러 스마트 기기들을 통합 제어/관리 할 수 있게 됨으로써 사용자에게 편의성을 제공할 수 있습니다.

